generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Category {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  description String?
  items       Item[]  @relation("CategoryItems")
}

model Item {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  description  String?
  category     Category @relation("CategoryItems", fields: [categoryId], references: [id])
  categoryId   String   @db.ObjectId
  sku          String   @unique
  barcode      String?
  quantity     Int
  unit         Unit     @relation("UnitItems", fields: [unitId], references: [id])
  unitId       String   @db.ObjectId
  brand        Brand    @relation("BrandItems", fields: [brandId], references: [id])
  brandId      String   @db.ObjectId
  sellingPrice Float
  buyingPrice  Float
  supplier     Supplier @relation(fields: [supplierId], references: [id])
  supplierId   String   @db.ObjectId
  reOrderPoint Int
  location     String?
  imageURL     String
  weight       Float?
  dimensions   String?
  taxRate      Float
  notes        String?
}

model Unit {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  title        String
  abbreviation String
  items        Item[] @relation("UnitItems")
}

model Brand {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  title String
  items Item[] @relation("BrandItems")
}

model Warehouse {
  id                      String                    @id @default(auto()) @map("_id") @db.ObjectId
  title                   String
  location                String?
  description             String?
  warehouseType           String
}

model Supplier {
  id            String  @id @default(auto()) @map("_id") @db.ObjectId
  name          String
  phone         String?
  email         String?
  address       String?
  contactPerson String?
  supplierCode  String  @unique
  paymentTerms  String?
  taxID         String?
  notes         String?
  Item          Item[]
}

model Post {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  title    String
  author   User   @relation("UserPosts", fields: [authorId], references: [id], onDelete: Cascade)
  authorId String @db.ObjectId
}

model User {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  posts Post[] @relation("UserPosts")
}

model YourModel {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model AddStockAdjustment {
  id                      String    @id @default(auto()) @map("_id") @db.ObjectId
  referenceNumber         String
  addStockQty             Int
  notes                   String?
  receivingWarehouseId    String    @db.ObjectId
  itemId                  String    @db.ObjectId
}

model TransferStockAdjustment {
  id                     String    @id @default(auto()) @map("_id") @db.ObjectId
  referenceNumber        String
  transferStockQty       Int
  notes                  String?
  givingWarehouseId      String    @db.ObjectId
  receivingWarehouseId   String    @db.ObjectId
  itemId                 String    @db.ObjectId
}
